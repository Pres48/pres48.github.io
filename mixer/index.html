<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Stuffed Animal Mixer</title>

<style>
    body {
        font-family: 'Comic Sans MS', 'Fredoka', sans-serif;
        background: linear-gradient(#e3fff1, #c7e8ff);
        margin: 0;
        padding: 25px;
        display: flex;
        flex-direction: column;
        align-items: center;
        overflow-x: hidden;
    }

    h1 {
        margin-bottom: 20px;
        font-size: 42px;
        color: #1a92b6;
        text-shadow: 2px 2px #ffffff;
    }

    /* Buttons */
    button {
        background: #6cd4b4;
        border: none;
        padding: 10px 15px;
        border-radius: 12px;
        font-size: 16px;
        cursor: pointer;
        font-weight: bold;
        color: white;
        box-shadow: 0 3px 0 #4aa88b;
        transition: transform 0.1s;
    }
    button:hover { transform: scale(1.08); }
    button:active { transform: scale(0.95); }

    /* Tabs */
    #tabs button {
        width: 150px;
    }

    /* Carousel */
    .carousel {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        background: #ffffffaa;
        padding: 15px;
        border-radius: 15px;
        box-shadow: 0 4px 10px #00000020;
        border: 3px dashed #7fd6ff;
        margin-bottom: 20px;
    }

    .carousel img {
        width: 150px;
        height: 150px;
        object-fit: contain;
        background: white;
        border-radius: 15px;
        padding: 10px;
        border: 3px solid #b8edff;
        box-shadow: 0 4px 8px #00000020;
    }

    /* Built Creature Area */
    #preview-area {
        width: 350px;
        height: 430px;
        background: #ffffffaa;
        border: 4px solid #7fe6c9;
        border-radius: 25px;
        position: relative;
        box-shadow: 0 5px 15px #00000025;
    }

    .part {
        position: absolute;
        object-fit: contain;
        pointer-events: none;
    }

    /* Updated realistic sizing */
    #head {
        width: 130px;
        height: auto;
        top: 10px;
        left: 110px;
    }
    #body {
        width: 160px;
        top: 125px;
        left: 95px;
    }
    #left-arm {
        width: 150px;
        top: 150px;
        left: 15px;
    }
    #right-arm {
        width: 150px;
        top: 150px;
        left: 185px;
    }
    #left-leg {
        width: 110px;
        top: 295px;
        left: 85px;
    }
    #right-leg {
        width: 110px;
        top: 295px;
        left: 155px;
    }

    /* Animated floating bubbles */
    .bubble {
        position: absolute;
        background: rgba(255,255,255,0.5);
        border-radius: 50%;
        animation: floatUp 12s linear infinite;
    }

    @keyframes floatUp {
        0% { transform: translateY(100vh) scale(0.5); opacity: 1; }
        100% { transform: translateY(-20vh) scale(1); opacity: 0; }
    }
</style>
</head>
<body>

<h1>Stuffed Animal Mixer</h1>

<!-- Bubble background -->
<script>
for (let i = 0; i < 20; i++) {
    const b = document.createElement("div");
    b.className = "bubble";
    const size = Math.random() * 80 + 20;
    b.style.width = size + "px";
    b.style.height = size + "px";
    b.style.left = Math.random() * 100 + "vw";
    b.style.animationDelay = Math.random() * 10 + "s";
    document.body.appendChild(b);
}
</script>

<div style="display:flex; gap:25px; width:100%; justify-content:center;">

    <!-- Tabs -->
    <div id="tabs" style="display:flex; flex-direction:column; gap:12px;">
        <button onclick="showTab('head')">Head</button>
        <button onclick="showTab('body')">Body</button>
        <button onclick="showTab('leftArm')">Left Arm</button>
        <button onclick="showTab('rightArm')">Right Arm</button>
        <button onclick="showTab('leftLeg')">Left Leg</button>
        <button onclick="showTab('rightLeg')">Right Leg</button>
        <button onclick="randomizeAll()" style="margin-top:20px; background:#4fb3ff; box-shadow:0 3px 0 #3583c2;">Randomize All</button>
        <button onclick="downloadCreature()" style="background:#5fdd78; box-shadow:0 3px 0 #45a85a;">Download My Creature</button>
    </div>

    <!-- Carousel -->
    <div id="carousel-area" style="width:220px;">

        <div class="carousel" id="carousel-head">
            <h3>Head</h3>
            <img id="head-img" src="" alt="Head">
            <button onclick="prev('head')">Prev</button>
            <button onclick="next('head')">Next</button>
        </div>

        <div class="carousel" id="carousel-body" style="display:none;">
            <h3>Body</h3>
            <img id="body-img" src="" alt="Body">
            <button onclick="prev('body')">Prev</button>
            <button onclick="next('body')">Next</button>
        </div>

        <div class="carousel" id="carousel-leftArm" style="display:none;">
            <h3>Left Arm</h3>
            <img id="left-arm-img" src="" alt="Left Arm">
            <button onclick="prev('leftArm')">Prev</button>
            <button onclick="next('leftArm')">Next</button>
        </div>

        <div class="carousel" id="carousel-rightArm" style="display:none;">
            <h3>Right Arm</h3>
            <img id="right-arm-img" src="" alt="Right Arm">
            <button onclick="prev('rightArm')">Prev</button>
            <button onclick="next('rightArm')">Next</button>
        </div>

        <div class="carousel" id="carousel-leftLeg" style="display:none;">
            <h3>Left Leg</h3>
            <img id="left-leg-img" src="" alt="Left Leg">
            <button onclick="prev('leftLeg')">Prev</button>
            <button onclick="next('leftLeg')">Next</button>
        </div>

        <div class="carousel" id="carousel-rightLeg" style="display:none;">
            <h3>Right Leg</h3>
            <img id="right-leg-img" src="" alt="Right Leg">
            <button onclick="prev('rightLeg')">Prev</button>
            <button onclick="next('rightLeg')">Next</button>
        </div>

    </div>

    <!-- Creature Preview -->
    <div id="preview-area">
        <img id="head" class="part">
        <img id="body" class="part">
        <img id="left-arm" class="part">
        <img id="right-arm" class="part">
        <img id="left-leg" class="part">
        <img id="right-leg" class="part">
    </div>

</div>

<script>
/* Only bear exists for now â€” add more later */
const files = {
    head: ["img/heads/bear.png"],
    body: ["img/bodies/bear.png"],
    leftArm: ["img/arms/left-bear.png"],
    rightArm: ["img/arms/right-bear.png"],
    leftLeg: ["img/legs/left-bear.png"],
    rightLeg: ["img/legs/right-bear.png"]
};

const index = { head: 0, body: 0, leftArm: 0, rightArm: 0, leftLeg: 0, rightLeg: 0 };

/* Sound effects */
const sounds = [
    "https://cdn.pixabay.com/download/audio/2022/03/15/audio_35c50a6487.mp3",
    "https://cdn.pixabay.com/download/audio/2022/03/25/audio_fe7bbdba59.mp3",
    "https://cdn.pixabay.com/download/audio/2022/03/10/audio_f311b5b7a2.mp3"
];

function playSound() {
    new Audio(sounds[Math.floor(Math.random()*sounds.length)]).play();
}

function update(part) {
    const img = document.getElementById(part + "-img");
    const view = document.getElementById(part.replace(/([A-Z])/g, '-$1').toLowerCase());
    img.src = files[part][index[part]];
    view.src = files[part][index[part]];
}

function next(part) {
    index[part] = (index[part] + 1) % files[part].length;
    update(part);
    playSound();
}
function prev(part) {
    index[part] = (index[part] - 1 + files[part].length) % files[part].length;
    update(part);
    playSound();
}

function showTab(part) {
    document.querySelectorAll(".carousel").forEach(c => c.style.display = "none");
    document.getElementById("carousel-" + part).style.display = "flex";
}

/* Randomize All */
function randomizeAll() {
    Object.keys(files).forEach(p => {
        index[p] = Math.floor(Math.random() * files[p].length);
        update(p);
    });
    playSound();
}

/* Download creature */
function downloadCreature() {
    html2canvas(document.querySelector("#preview-area")).then(canvas => {
        const link = document.createElement("a");
        link.download = "my-creature.png";
        link.href = canvas.toDataURL();
        link.click();
    });
}

/* Load helper library */
let s = document.createElement("script");
s.src = "https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js";
document.body.appendChild(s);

/* Initialize */
Object.keys(files).forEach(update);
showTab("head");
</script>

</body>
</html>
