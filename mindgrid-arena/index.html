<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MindGrid Arena</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <header class="top-bar">
      <div class="brand">
        <span class="logo-dot"></span>
        <span class="brand-title">MindGrid Arena</span>
      </div>
      <div class="player-info">
        <label>
          Name:
          <input id="playerNameInput" type="text" maxlength="12" placeholder="Guest" />
        </label>
      </div>
    </header>

    <main class="game-layout">
      <section class="game-panel">
        <div class="stats-row">
          <div class="stat">
            <span class="label">Level</span>
            <span class="value" id="levelDisplay">1</span>
          </div>
          <div class="stat">
            <span class="label">Turn</span>
            <span class="value" id="turnDisplay">0 / 0</span>
          </div>
          <div class="stat">
            <span class="label">Score</span>
            <span class="value" id="scoreDisplay">0</span>
          </div>
          <div class="stat">
            <span class="label">Multiplier</span>
            <span class="value" id="multiplierDisplay">x1.0</span>
          </div>
          <div class="stat">
            <span class="label">Last Move</span>
            <span class="value" id="lastMoveDisplay">0</span>
          </div>
        </div>
        
        <div class="timer-bar">
          <div class="timer-fill" id="timerFill"></div>
        </div>

        <div class="message" id="messageArea">
          Click "Start Game" to begin.
        </div>

        <div class="level-goals" id="levelGoals"></div>

        <div class="grid" id="gridContainer">
          <!-- tiles injected by JS -->
        </div>

        <div class="controls-row">
          <button id="startButton">Start Game</button>
          <button id="restartButton" class="secondary" disabled>Restart</button>
        </div>
      </section>

      <aside class="side-panel">
        <!-- HOW TO PLAY -->
        <section class="panel-block">
          <h2>How to Play</h2>
          <p>
            Each level is a series of fast turns. On every turn you must click
            <strong>exactly one tile</strong> before the bar runs out.
          </p>
          <p>
            Your <strong>score for a turn</strong> is:
            <br />
            <code>tile points × current multiplier</code>
          </p>
          <p>
            Different tiles change your points and multiplier in different ways:
          </p>
          <ul class="bullet-list">
            <li>
              <strong>Blue – Number</strong>: gives base points (shown on the tile),
              multiplied by your current multiplier.
            </li>
            <li>
              <strong>Yellow – Bonus</strong>: small points, but
              <strong>raises your multiplier</strong> for future turns.
            </li>
            <li>
              <strong>Green – Chain</strong>: gives more points when you pick them
              on <strong>consecutive turns</strong>. Each chain in a row is worth more.
            </li>
            <li>
              <strong>Red – Risk</strong>: can be big positive or negative. Negative
              values can <strong>lower your multiplier</strong>.
            </li>
          </ul>
          <p>
            Missing a turn (no click in time) gives <strong>0 points</strong> and
            breaks any active chain.
          </p>
          <p>
            As levels go up, you get <strong>less time per move</strong>,
            <strong>more turns</strong>, and <strong>trickier boards</strong>.
          </p>
        </section>
      
        <!-- HIGH SCORE (LOCAL BEST) -->
          <section class="panel-block">
            <h2>Session High Score</h2>
            <p class="soft-text" style="margin-bottom: 4px;">
              Best run in this browser session.
            </p>
            <div id="highScoreBox" class="highscore-box">
              <div class="highscore-row">
                <span class="label">Best Score:</span>
                <span class="value" id="bestScoreDisplay">–</span>
              </div>
              <div class="highscore-row">
                <span class="label">Best Level:</span>
                <span class="value" id="bestLevelDisplay">–</span>
              </div>
              <button id="saveScoreButton" class="secondary" disabled>Retry Save</button>
              <p id="saveStatus" class="save-status"></p>
            </div>
          </section>

      
        <!-- GLOBAL LEADERBOARD (SUPABASE) -->
        <section class="panel-block">
          <h2>Leaderboard</h2>
          <div id="leaderboardList" class="leaderboard-list">
            <p class="soft-text">Loading…</p>
          </div>
        </section>
      </aside>

    </main>
  </div>

  <script type="module" src="main.js"></script>
</body>
</html>
